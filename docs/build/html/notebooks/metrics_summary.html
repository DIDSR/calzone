<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Summary and guide for calibration metrics &mdash; calzone develop documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=16816911"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reliability diagram" href="reliability_diagram.html" />
    <link rel="prev" title="Quick Start" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            calzone
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to calzone documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Summary and guide for calibration metrics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Guide-to-Calibration-Metrics">Guide to Calibration Metrics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reliability_diagram.html">Reliability diagram</a></li>
<li class="toctree-l1"><a class="reference internal" href="ece_mce.html">Exepected Calibration Error(ECE) and Maximum Calibration Error (MCE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="hl_test.html">Hosmer-Lemeshow test (HL test)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cox.html">COX calibration analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="ici.html">Integrated Calibration Index (ICI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="spiegelhalter_z.html">Spiegelhalter’s Z-test</a></li>
<li class="toctree-l1"><a class="reference internal" href="prevalence_adjustment.html">Prevalence adjustment</a></li>
<li class="toctree-l1"><a class="reference internal" href="subgroup.html">Subgroup analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">calzone</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">calzone</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Summary and guide for calibration metrics</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/metrics_summary.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Summary-and-guide-for-calibration-metrics">
<h1>Summary and guide for calibration metrics<a class="headerlink" href="#Summary-and-guide-for-calibration-metrics" title="Link to this heading"></a></h1>
<p>We provide a summary of the calibration metrics provides by calzone, including the pros and cons of each metrics. For a more detailed explanation of each metrics and how to calculate them using calzone, please refer to the specific notebook.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">styled_df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">escape</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_4e56f th {
  text-align: center;
}
#T_4e56f_row0_col0, #T_4e56f_row0_col1, #T_4e56f_row0_col2, #T_4e56f_row0_col3, #T_4e56f_row0_col4, #T_4e56f_row1_col0, #T_4e56f_row1_col1, #T_4e56f_row1_col2, #T_4e56f_row1_col3, #T_4e56f_row1_col4, #T_4e56f_row2_col0, #T_4e56f_row2_col1, #T_4e56f_row2_col2, #T_4e56f_row2_col3, #T_4e56f_row2_col4, #T_4e56f_row3_col0, #T_4e56f_row3_col1, #T_4e56f_row3_col2, #T_4e56f_row3_col3, #T_4e56f_row3_col4, #T_4e56f_row4_col0, #T_4e56f_row4_col1, #T_4e56f_row4_col2, #T_4e56f_row4_col3, #T_4e56f_row4_col4, #T_4e56f_row5_col0, #T_4e56f_row5_col1, #T_4e56f_row5_col2, #T_4e56f_row5_col3, #T_4e56f_row5_col4 {
  text-align: left;
  white-space: pre-wrap;
}
</style>
<table id="T_4e56f">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_4e56f_level0_col0" class="col_heading level0 col0" >Metrics</th>
      <th id="T_4e56f_level0_col1" class="col_heading level0 col1" >Description</th>
      <th id="T_4e56f_level0_col2" class="col_heading level0 col2" >Pros</th>
      <th id="T_4e56f_level0_col3" class="col_heading level0 col3" >Cons</th>
      <th id="T_4e56f_level0_col4" class="col_heading level0 col4" >Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_4e56f_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_4e56f_row0_col0" class="data row0 col0" >ECE</td>
      <td id="T_4e56f_row0_col1" class="data row0 col1" >Using binned reliability diagram, sum of absolute difference, weighted by bin count.</td>
      <td id="T_4e56f_row0_col2" class="data row0 col2" >• Intuitive<br>• Easy to calculate</td>
      <td id="T_4e56f_row0_col3" class="data row0 col3" >• Depend on binning<br>• Depend on class-by-class or top-class</td>
      <td id="T_4e56f_row0_col4" class="data row0 col4" >Average deviation from true probability</td>
    </tr>
    <tr>
      <th id="T_4e56f_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_4e56f_row1_col0" class="data row1 col0" >MCE</td>
      <td id="T_4e56f_row1_col1" class="data row1 col1" >Using binned reliability diagram, Maximum absolute difference.</td>
      <td id="T_4e56f_row1_col2" class="data row1 col2" >• Intuitive<br>• Easy to calculate</td>
      <td id="T_4e56f_row1_col3" class="data row1 col3" >• Depend on binning<br>• Depend on class-by-class or top-class</td>
      <td id="T_4e56f_row1_col4" class="data row1 col4" >Maximum deviation from true probability</td>
    </tr>
    <tr>
      <th id="T_4e56f_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_4e56f_row2_col0" class="data row2 col0" >Hosmer-Lemeshow test</td>
      <td id="T_4e56f_row2_col1" class="data row2 col1" >Using binned reliability diagram, Chi-squared based test using expected and observed.</td>
      <td id="T_4e56f_row2_col2" class="data row2 col2" >• Intuitive<br>• Statistical meaning</td>
      <td id="T_4e56f_row2_col3" class="data row2 col3" >• Depend on binning<br>• Low power<br>• Wrong coverage</td>
      <td id="T_4e56f_row2_col4" class="data row2 col4" >Test of calibration</td>
    </tr>
    <tr>
      <th id="T_4e56f_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_4e56f_row3_col0" class="data row3 col0" >Spiegelhalter's z test</td>
      <td id="T_4e56f_row3_col1" class="data row3 col1" >Decomposition of brier score. Normal distributed</td>
      <td id="T_4e56f_row3_col2" class="data row3 col2" >• Doesn't rely on binning<br>• Statistical meaning</td>
      <td id="T_4e56f_row3_col3" class="data row3 col3" >• Doesn't detect prevalence shift</td>
      <td id="T_4e56f_row3_col4" class="data row3 col4" >Test of calibration</td>
    </tr>
    <tr>
      <th id="T_4e56f_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_4e56f_row4_col0" class="data row4 col0" >Cox's analysis</td>
      <td id="T_4e56f_row4_col1" class="data row4 col1" >Logistic regression of the logits</td>
      <td id="T_4e56f_row4_col2" class="data row4 col2" >• Doesn't rely on binning<br>• Its value shows the how the calibration is off</td>
      <td id="T_4e56f_row4_col3" class="data row4 col3" >• Failed to capture some cases of miscalibration</td>
      <td id="T_4e56f_row4_col4" class="data row4 col4" >A logit fit to the calibration curve</td>
    </tr>
    <tr>
      <th id="T_4e56f_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_4e56f_row5_col0" class="data row5 col0" >Integrated calibration index (ICI)</td>
      <td id="T_4e56f_row5_col1" class="data row5 col1" >Similar to ECE, using smooth fit (usually losse) instead of binning to get the calibration curve</td>
      <td id="T_4e56f_row5_col2" class="data row5 col2" >• Doesn't rely on binning<br>• Capture all kind of miscalibration</td>
      <td id="T_4e56f_row5_col3" class="data row5 col3" >• Depend on the choice of curve fitting<br>• Depend on fitting parameters</td>
      <td id="T_4e56f_row5_col4" class="data row5 col4" >Average deviation from true probability</td>
    </tr>
  </tbody>
</table></div>
</div>
<section id="Guide-to-Calibration-Metrics">
<h2>Guide to Calibration Metrics<a class="headerlink" href="#Guide-to-Calibration-Metrics" title="Link to this heading"></a></h2>
<p>We recommend to visualize the calibration using reliability diagrams. If you see general over- or under-estimation of the probability for a given class, consider applying a prevalence adjustment to see whether it is only due to prevalence shift. After prevalence adjustment, plot the reliability diagrams again and examine the result of calibration metrcis. We recommend using Cox and Loess integrated calibration index(ICI) to get a general sense of the average probability deviation. We recommend
using Spiegelhalter’z test to test for calibration. Other metrics such as ECE, Cox slope/intercept and HL test has it limitations and should be used as with caution. See the details description of each metric in the following sections.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quick Start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reliability_diagram.html" class="btn btn-neutral float-right" title="Reliability diagram" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kwok Lung Jason Fan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>